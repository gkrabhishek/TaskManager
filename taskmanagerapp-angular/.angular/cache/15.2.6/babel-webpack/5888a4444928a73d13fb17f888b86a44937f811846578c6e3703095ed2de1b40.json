{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class AuthserviceService {\n  constructor(router) {\n    this.router = router;\n    this.TOKEN_KEY = 'my_app_token';\n  }\n  canActivate(route, state) {\n    if (this.isLoggedIn()) {\n      return true;\n    }\n    this.router.navigate(['']);\n    return false;\n  }\n  setToken(token) {\n    localStorage.setItem(this.TOKEN_KEY, token);\n  }\n  getToken() {\n    return localStorage.getItem(this.TOKEN_KEY);\n  }\n  removeToken() {\n    localStorage.removeItem(this.TOKEN_KEY);\n  }\n  isLoggedIn() {\n    return this.getToken() !== null;\n  }\n  getEmployeeRole() {\n    const token = this.getToken();\n    const decodedToken = jwtDecode(token);\n    return decodedToken['role'];\n  }\n  extractPayloadFromToken(token) {\n    const decodedToken = jwtDecode(token);\n    console.log('decode token ', decodedToken);\n    console.log('decode token ', decodedToken['sub']);\n    return decodedToken['sub'];\n  }\n}\nAuthserviceService.ɵfac = function AuthserviceService_Factory(t) {\n  return new (t || AuthserviceService)(i0.ɵɵinject(i1.Router));\n};\nAuthserviceService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthserviceService,\n  factory: AuthserviceService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,OAAOA,SAAS,MAAM,YAAY;;;AAMlC,OAAM,MAAOC,kBAAkB;EAE7BC,YAAoBC,MAAa;IAAb,WAAM,GAANA,MAAM;IAQlB,cAAS,GAAG,cAAc;EARG;EACrCC,WAAW,CAACC,KAA6B,EAAEC,KAA0B;IACnE,IAAG,IAAI,CAACC,UAAU,EAAE,EAAC;MACnB,OAAO,IAAI;;IAEb,IAAI,CAACJ,MAAM,CAACK,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1B,OAAO,KAAK;EACd;EAGAC,QAAQ,CAACC,KAAU;IACjBC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACC,SAAS,EAAEH,KAAK,CAAC;EAC7C;EAEAI,QAAQ;IACN,OAAOH,YAAY,CAACI,OAAO,CAAC,IAAI,CAACF,SAAS,CAAC;EAC7C;EAEAG,WAAW;IACTL,YAAY,CAACM,UAAU,CAAC,IAAI,CAACJ,SAAS,CAAC;EACzC;EAEAN,UAAU;IACR,OAAO,IAAI,CAACO,QAAQ,EAAE,KAAK,IAAI;EACjC;EACAI,eAAe;IACb,MAAMR,KAAK,GAAM,IAAI,CAACI,QAAQ,EAAE;IAChC,MAAMK,YAAY,GAAKnB,SAAS,CAACU,KAAK,CAAC;IACvC,OAAOS,YAAY,CAAC,MAAM,CAAC;EAC7B;EACAC,uBAAuB,CAACV,KAAa;IACnC,MAAMS,YAAY,GAAQnB,SAAS,CAACU,KAAK,CAAC;IAC1CW,OAAO,CAACC,GAAG,CAAC,eAAe,EAACH,YAAY,CAAC;IACzCE,OAAO,CAACC,GAAG,CAAC,eAAe,EAACH,YAAY,CAAC,KAAK,CAAC,CAAC;IAChD,OAAOA,YAAY,CAAC,KAAK,CAAC;EAC5B;;AArCWlB,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;SAAlBA,kBAAkB;EAAAsB,SAAlBtB,kBAAkB;EAAAuB,YAFjB;AAAM","names":["jwtDecode","AuthserviceService","constructor","router","canActivate","route","state","isLoggedIn","navigate","setToken","token","localStorage","setItem","TOKEN_KEY","getToken","getItem","removeToken","removeItem","getEmployeeRole","decodedToken","extractPayloadFromToken","console","log","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Gowlikar.Abhishek\\Documents\\Projects\\TaskManger\\taskmanagerapp-angular\\taskmanagerapp-angular\\src\\app\\authservice.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport jwtDecode from 'jwt-decode';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthserviceService implements CanActivate{\n\n  constructor(private router:Router) { }\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | UrlTree | Observable<boolean | UrlTree> | Promise<boolean | UrlTree> {\n    if(this.isLoggedIn()){\n      return true;\n    }\n    this.router.navigate([''])\n    return false;\n  }\n  private TOKEN_KEY = 'my_app_token';\n\n  setToken(token: any) {\n    localStorage.setItem(this.TOKEN_KEY, token);\n  }\n\n  getToken(): string | null {\n    return localStorage.getItem(this.TOKEN_KEY);\n  }\n\n  removeToken() {\n    localStorage.removeItem(this.TOKEN_KEY);\n  }\n\n  isLoggedIn(): boolean {\n    return this.getToken() !== null;\n  }\n  getEmployeeRole(){\n    const token:any =this.getToken();\n    const decodedToken:any=jwtDecode(token);\n    return decodedToken['role'];\n  }\n  extractPayloadFromToken(token: string) {\n    const decodedToken:any =  jwtDecode(token);\n    console.log('decode token ',decodedToken);\n    console.log('decode token ',decodedToken['sub']);\n    return decodedToken['sub'];\n  }\n  \n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}